{"version":3,"file":"js/206.js","mappings":"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","sources":["webpack://topcvetok/./src/entities/product/ui/product-list/index.vue?bfda","webpack://topcvetok/./src/entities/product/ui/product-list/index.vue","webpack://topcvetok/./src/entities/product/ui/product-list/index.vue?2ab4","webpack://topcvetok/./src/features/filter/sidebar/ui/index.vue?c3f0","webpack://topcvetok/./src/features/filter/sidebar/ui/index.vue","webpack://topcvetok/./src/features/filter/sidebar/ui/index.vue?bedd","webpack://topcvetok/./src/pages/product/ui/product-info/ui/index.vue?69ec","webpack://topcvetok/./src/pages/product/ui/product-info/ui/index.vue","webpack://topcvetok/./src/pages/product/ui/product-info/ui/index.vue?e6d2"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, createBlock as _createBlock, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"product-list\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"load-more\"\n}\nconst _hoisted_3 = {\n  key: 1,\n  class: \"loading\"\n}\n\nimport { useStore } from 'vuex';\r\nimport { computed, onMounted, ref } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport { SliderCards } from '@/features/slider-cards';\r\n\r\nconst limit = 18;\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\r\nconst store = useStore();\r\nconst route = useRoute();\r\n\r\nconst offset = ref(0);\r\nconst isLoading = ref(false);\r\n\r\nconst loadProducts = async () => {\r\n  if (isLoading.value) return; // защита от двойного вызова\r\n  isLoading.value = true;\r\n  await store.dispatch('products/fetchProducts', { limit, offset: offset.value });\r\n  offset.value += limit;\r\n  isLoading.value = false;\r\n};\r\n\r\nonMounted(() => {\r\n  loadProducts();\r\n});\r\n\r\nconst products = computed(() => {\r\n  const allProducts = store.state.products.productsData;\r\n  const segments = route.path.split('/').filter(Boolean);\r\n  const lastSegment = segments[segments.length - 1];\r\n\r\n  if (lastSegment === 'product') {\r\n    return allProducts;\r\n  }\r\n\r\n  return allProducts.filter((p: any) =>\r\n    p.categories?.some((c: any) => c.slug === lastSegment)\r\n  );\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(products.value || [], (product) => {\n        return (_openBlock(), _createBlock(_unref(SliderCards), {\n          key: product.id,\n          cardData: product\n        }, null, 8, [\"cardData\"]))\n      }), 128))\n    ]),\n    (!isLoading.value)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          _createElementVNode(\"button\", { onClick: loadProducts }, \"Показать ещё\")\n        ]))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \"Загрузка...\"))\n  ], 64))\n}\n}\n\n})","кайф\r\n<script setup lang=\"ts\">\r\nimport { useStore } from 'vuex';\r\nimport { computed, onMounted, ref } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport { SliderCards } from '@/features/slider-cards';\r\n\r\nconst store = useStore();\r\nconst route = useRoute();\r\n\r\nconst limit = 18;\r\nconst offset = ref(0);\r\nconst isLoading = ref(false);\r\n\r\nconst loadProducts = async () => {\r\n  if (isLoading.value) return; // защита от двойного вызова\r\n  isLoading.value = true;\r\n  await store.dispatch('products/fetchProducts', { limit, offset: offset.value });\r\n  offset.value += limit;\r\n  isLoading.value = false;\r\n};\r\n\r\nonMounted(() => {\r\n  loadProducts();\r\n});\r\n\r\nconst products = computed(() => {\r\n  const allProducts = store.state.products.productsData;\r\n  const segments = route.path.split('/').filter(Boolean);\r\n  const lastSegment = segments[segments.length - 1];\r\n\r\n  if (lastSegment === 'product') {\r\n    return allProducts;\r\n  }\r\n\r\n  return allProducts.filter((p: any) =>\r\n    p.categories?.some((c: any) => c.slug === lastSegment)\r\n  );\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div class=\"product-list\">\r\n    <SliderCards v-for=\"product in products || []\" :key=\"product.id\" :cardData=\"product\" />\r\n  </div>\r\n\r\n  <!-- Кнопка подгрузки -->\r\n  <div class=\"load-more\" v-if=\"!isLoading\">\r\n    <button @click=\"loadProducts\">Показать ещё</button>\r\n  </div>\r\n  <div v-else class=\"loading\">Загрузка...</div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.product-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n}\r\n\r\n.load-more {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n\r\n  button {\r\n    padding: 10px 20px;\r\n    border: none;\r\n    background: #333;\r\n    color: #fff;\r\n    cursor: pointer;\r\n    border-radius: 6px;\r\n\r\n    &:hover {\r\n      background: #555;\r\n    }\r\n  }\r\n}\r\n\r\n.loading {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=49514fff&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-49514fff\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, resolveComponent as _resolveComponent, createElementVNode as _createElementVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"sidebar\" }\nconst _hoisted_2 = { class: \"sidebar__items\" }\n\nimport { Paragraph } from '@/shared/ui/text/paragraph';\r\nimport { useStore } from 'vuex';\r\nimport { computed, onMounted } from 'vue';\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\r\nconst store = useStore();\r\n\r\nonMounted(() => {\r\n  store.dispatch('categories/fetchCategories');\r\n});\r\n\r\nconst categories = computed(() => store.state.categories.categoriesData);\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_RouterLink = _resolveComponent(\"RouterLink\")!\n\n  return (_openBlock(), _createElementBlock(\"aside\", _hoisted_1, [\n    _createElementVNode(\"ul\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(categories.value, (item) => {\n        return (_openBlock(), _createElementBlock(\"li\", {\n          class: \"item\",\n          key: item.id\n        }, [\n          _createVNode(_component_RouterLink, {\n            to: `/product/${item.slug}/`\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_unref(Paragraph), {\n                tagName: \"span\",\n                size: \"s\",\n                color: \"dark-gray\",\n                class: \"item__text\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(item.name), 1)\n                ]),\n                _: 2\n              }, 1024)\n            ]),\n            _: 2\n          }, 1032, [\"to\"])\n        ]))\n      }), 128))\n    ])\n  ]))\n}\n}\n\n})","<script setup lang=\"ts\">\r\nimport { Paragraph } from '@/shared/ui/text/paragraph';\r\nimport { useStore } from 'vuex';\r\nimport { computed, onMounted } from 'vue';\r\n\r\nconst store = useStore();\r\n\r\nonMounted(() => {\r\n  store.dispatch('categories/fetchCategories');\r\n});\r\n\r\nconst categories = computed(() => store.state.categories.categoriesData);\r\n\r\n</script>\r\n\r\n<template>\r\n  <aside class=\"sidebar\">\r\n    <ul class=\"sidebar__items\">\r\n      <li class=\"item\" v-for=\"item in categories\" :key=\"item.id\">\r\n        <RouterLink :to=\"`/product/${item.slug}/`\">\r\n          <Paragraph tagName=\"span\" size=\"s\" color=\"dark-gray\" class=\"item__text\">\r\n            {{ item.name }}\r\n          </Paragraph>\r\n        </RouterLink>\r\n\r\n      </li>\r\n    </ul>\r\n  </aside>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n@import './style.scss';\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=00bcf990&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-00bcf990\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"section-products\" }\nconst _hoisted_2 = { class: \"section-products__content\" }\n\nimport { ProductsList } from '@/entities/product/ui/product-list';\r\nimport { Sidebar } from '@/features/filter/sidebar';\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"section\", _hoisted_1, [\n    _createVNode(_unref(Sidebar)),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_unref(ProductsList))\n    ])\n  ]))\n}\n}\n\n})","<script setup lang=\"ts\">\r\nimport { ProductsList } from '@/entities/product/ui/product-list';\r\nimport { Sidebar } from '@/features/filter/sidebar';\r\n</script>\r\n<template>\r\n   <section class=\"section-products\">\r\n        <Sidebar />\r\n        <div class=\"section-products__content\"> \r\n                <ProductsList />\r\n        </div>\r\n    </section>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n@import './style.scss';\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=7c1a2bd1&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7c1a2bd1\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","key","_hoisted_3","limit","_defineComponent","__name","setup","__props","store","useStore","route","useRoute","offset","ref","isLoading","loadProducts","async","value","dispatch","onMounted","products","computed","allProducts","state","productsData","segments","path","split","filter","Boolean","lastSegment","length","p","categories","some","c","slug","_ctx","_cache","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_renderList","product","_createBlock","_unref","SliderCards","id","cardData","onClick","__exports__","categoriesData","_component_RouterLink","_resolveComponent","item","_createVNode","to","default","_withCtx","Paragraph","tagName","size","color","_createTextVNode","_toDisplayString","name","_","Sidebar","ProductsList"],"sourceRoot":""}